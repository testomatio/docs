---
import type { Props } from '@astrojs/starlight/props';
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import VtbotStarlight from 'astro-vtbot/components/starlight/Base.astro';
---

<VtbotStarlight {...Astro.props}>
    <StarlightHead {...Astro.props}><slot /></StarlightHead>
</VtbotStarlight>

<script>
    document.addEventListener("astro:before-swap", (e) => {
        const crispStyle = document.querySelector(
            'link[rel="stylesheet"][href*="client.crisp.chat"]'
        );
        if (crispStyle) {
            e.newDocument.head.appendChild(crispStyle.cloneNode(true));
        }
    });
</script>